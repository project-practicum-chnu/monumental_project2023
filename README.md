# monumental_project2023
Проект команди MonuMental

Назва проекту: Комп'ютерні комплектуючі Інтернет-магазин "MonuMental-Electronics"

Опис предметної області:

Цей інтернет-магазин спеціалізується на продажу комп'ютерних комплектуючих та аксесуарів для будь-яких комп'ютерів. В магазині доступний широкий асортимент товарів, який включає в себе процесори, відеокарти, материнські плати, оперативну пам'ять, жорсткі диски, корпуси, монітори, клавіатури, миші та багато інших товарів, необхідних для збірки та оновлення комп'ютерів.

Основні сутності:

Продукти: Відображають інформацію про окремі комп'ютерні комплектуючі, такі як назва, опис, ціна та категорія.

Категорії: Групують продукти за типом (наприклад, процесори, відеокарти, монітори тощо).

Клієнти: Реєстровані користувачі, які можуть переглядати та робити замовлення.

Замовлення: Зберігають інформацію про замовлені продукти, клієнта та статус замовлення.

Елементи замовлення: Вказують, які продукти були додані до кожного замовлення та їх кількість.

Адреси доставки: Зберігають інформацію про адреси, на які буде доставлено замовлення.

Оплати: Відображають інформацію про сплачені суми за кожне замовлення.

Відгуки: Користувачі можуть залишати відгуки про продукти, вказуючи оцінку та коментар.

Основні функціональні можливості:

Реєстрація та авторизація користувачів.
Пошук та перегляд товарів за категоріями.
Додавання товарів до кошика та оформлення замовлення.
Оплата товарів онлайн.
Відстеження статусу замовлення.
Залишення відгуків та оцінок продуктів.
Можливість оновлення та видалення товарів (для адміністраторів).

Можливі ризики:

Забезпечення безпеки даних: оскільки йде робота з особистими даними клієнтів та платіжними даними, необхідно вкласти достатні зусилля для захисту цих даних від зловмисників.

Швидке масштабування: якщо цей інтернет-магазин успішно зростатиме, можуть виникнути труднощі з масштабуванням і забезпеченням продуктивності серверів і бази даних.

Бізнес-логіка та оплата: розробка правильної бізнес-логіки для обробки замовлень, оплати і доставки є складною задачею і може потребувати часу та додаткових ресурсів.

Тестування і валідація даних: недоліки в тестуванні можуть призвести до помилок у валідації даних, що може вплинути на коректну роботу інтернет-магазину.

Конкуренція на ринку: ринок комп'ютерних комплектуючих може бути конкурентним, і необхідно розробити стратегію для привертання і утримання клієнтів.

Законодавство і регулювання: необхідно слідкувати за відповідними законами та регуляціями, які стосуються електронної комерції та обробки особистих даних клієнтів.

Інтеграція з платіжними системами: інтеграція з платіжними системами може бути складною задачею і вимагати спеціалізованого досвіду.

Супровід і підтримка: необхідно планувати ресурси для підтримки та розвитку проекту після його впровадження.

Споживачський попит: ринок комп'ютерних комплектуючих може піддаватись коливанням у залежності від нових технологій та моделей, і це може вплинути на попит на наявні товари.

З урахуванням цих можливих ризиків, важливо ретельно планувати, виконувати тестування і валідацію, дотримуватися стандартів безпеки та законодавства, і мати план підтримки та розвитку цього інтернет-магазину.

Структура проекту (бекенд) :

Мова програмування - Python, фреймворк - Django, БД - SQLite 3.

Опис моделей :

Модель Product:

id: Унікальний ідентифікатор товару.
name: Назва товару (наприклад, "Процесор Intel Core i5-11400").
description: Опис товару (текстове поле для подробиць про товар).
price: Ціна товару (з числовим типом даних для зберігання ціни, наприклад, 999.99).

Модель Category:

id: Унікальний ідентифікатор категорії.
name: Назва категорії (наприклад, "Процесори", "Відеокарти", "Материнські плати" і т. д.).

Модель ProductCategory:

product: Зовнішній ключ, пов'язаний з Product, вказує на конкретний товар.
category: Зовнішній ключ, пов'язаний з Category, вказує на категорію, до якої відноситься товар.

Модель Customer:

id: Унікальний ідентифікатор клієнта.
username: Ім'я користувача клієнта (може бути використане для авторизації).
email: Електронна пошта клієнта (унікальна, використовується для зв'язку і авторизації).
password: Пароль клієнта (рекомендується зберігати у захешованому форматі).

Модель Order:

id: Унікальний ідентифікатор замовлення.
customer: Зовнішній ключ, пов'язаний з Customer, вказує на клієнта, який зробив замовлення.
order_date: Дата і час створення замовлення.

Модель OrderItem:

id: Унікальний ідентифікатор елемента замовлення.
order: Зовнішній ключ, пов'язаний з Order, вказує на замовлення, до якого належить цей елемент.
product: Зовнішній ключ, пов'язаний з Product, вказує на товар, який був доданий до замовлення.
quantity: Кількість одиниць товару, які були замовлені.

Модель Address:

id: Унікальний ідентифікатор адреси доставки.
customer: Зовнішній ключ, пов'язаний з Customer, вказує на клієнта, для якого ця адреса призначена.
street: Вулиця доставки.
city: Місто доставки.
postal_code: Поштовий індекс.

Модель Payment:

id: Унікальний ідентифікатор оплати.
order: Зовнішній ключ, пов'язаний з Order, вказує на замовлення, за яке проведено оплату.
payment_date: Дата і час оплати.
amount: Сума оплати.

Модель Review:

id: Унікальний ідентифікатор відгуку.
product: Зовнішній ключ, пов'язаний з Product, вказує на товар, до якого написаний відгук.
customer: Зовнішній ключ, пов'язаний з Customer, вказує на клієнта, який написав відгук.
rating: Рейтинг товару, наприклад, від 1 до 5.
comment: Текстовий коментар клієнта.

Схема БД :

![image](https://github.com/project-practicum-chnu/monumental_project2023/assets/75749649/82f5ad59-1a93-4292-8446-817fdc6a861c)

Платіжна система
Призначення
Переказ коштів за товар замовлений в інтернет магазині;

Опис функціоналу
Клієнта, після замовлення товарів, перенаправляють на сторінку або показують способи оплати за товари, що є в корзині.

Деталі реалізації
В нашому інтернет магазині буде оплата через картку за допомогою платіжної системи Stripe (https://stripe.com/docs) Задача бекенд розробника - інтегрувати дану систему в нашу. Для перевірки працездатності stripe надає тестовий режим (https://stripe.com/docs/test-mode). Він надає можливість симулювати використання Stripe без переводу реальних коштів.

У файлі налаштувань треба вказати ключі для використання тестового і потім реального режимів.

Згідно документації https://stripe.com/docs/development/quickstart?lang=python інтеграція має проводитися

встановити бібліотеку stripe:
pip3 install --upgrade stripe
Приклад Реалізації:

import json
import os
import stripe

def create_payment():
    try:
        data = json.loads(request.data)
        # Create a PaymentIntent with the order amount and currency
        intent = stripe.PaymentIntent.create(
            amount=calculate_order_amount(data['items']),
            currency='usd',
            # In the latest version of the API, specifying the `automatic_payment_methods` parameter is optional because Stripe enables its functionality by default.
            automatic_payment_methods={
                'enabled': True,
            },
        )
        return jsonify({
            'clientSecret': intent['client_secret']
        })
    except Exception as e:
        return jsonify(error=str(e)), 403

Після вдалої транзакції в особистому кабінеті Stripe з'явиться відповідний запис про неї.

автоматична документація АПІ
Swagger
Ми використаємо бібліотеку ʼdrf-yasgʼ згідно керівництва https://drf-yasg.readthedocs.io/en/stable/readme.html#usage Для встановлення необхідно pip install -U drf-yasg

додати бібліотеку в settings.py

INSTALLED_APPS = [
   ...
   'django.contrib.staticfiles',  # required for serving swagger ui's css/js files
   'drf_yasg',
   ...
]
оновити urls.py

path('swagger/', views.schema_view.with_ui('swagger', cache_timeout=0), name='swagger'),
views.py

schema_view = get_schema_view(
    openapi.Info(
        title="API description",
        default_version="v1",
        description="test Description",
        contact=openapi.Contact(email="dl@lxt.nl")
    ),
    public=True,
    generator_class=OpenAPISchemaGenerator,
    permission_classes=(permissions.AllowAny,), )

Після цього ми бачитимемо тут http://127.0.0.1:8000/swagger/ все доступне АПІ і зможемо звідти робити HTTP запити



Структура проекту (фронтенд) :

Використані технології :

- HTML
- CSS
- JS
- HTMX

Сторінка авторизації

Сторінка входу слугує точкою входу для користувачів для отримання безпечного доступу до їхніх індивідуальних облікових записів у веб-застосунку інтернет-магазину. З огляду на те, що платформа може містити конфіденційні дані користувачів, такі як особиста інформація, історія замовлень та способи оплати, безпечний та інтуїтивно зрозумілий процес входу має важливе значення. Ця сторінка дозволяє користувачам вводити свої облікові дані, підтверджувати свою особу та отримувати доступ до своїх персоналізованих інформаційних панелей, де вони можуть виконувати різні завдання, такі як перегляд продуктів, розміщення замовлень та відстеження відправлень.

Опис функціоналу

Коли користувач вперше переходить на сторінку входу, він бачить форму, яка містить наступні поля:

- Поле адреси електронної пошти: Поле для введення адреси електронної пошти користувача.
- Поле "Пароль": Поле для введення пароля користувача.

Перевірка форми

Обидва поля є обов'язковими і включають перевірку HTML5 на стороні клієнта:
- Email: У полі для введення адреси електронної пошти використовується HTML-атрибут type="email", щоб переконатися, що користувач вводить коректний формат адреси електронної пошти.
- Пароль: Поле для введення пароля має тип type="password", щоб приховати символи при введенні.

Асинхронне відправлення форми

- Бібліотека HTMX перехоплює подію відправлення форми і робить асинхронний HTTP POST запит до бекенду Django за адресою /api/signin/.
- HTMX гарантує, що відправлення форми не призводить до повного перезавантаження сторінки, покращуючи користувацький досвід.

Обробка відповіді сервера

1. Сервер перевірить облікові дані. Якщо вони невірні, повертається відповідь у форматі JSON зі статусом "помилка". HTMX відреагує на це, відобразивши повідомлення про помилку на формі.
2. Якщо облікові дані правильні, сервер створить новий сеанс користувача і поверне статус "успіх" у відповіді JSON.
3. Після успішного входу в систему, HTMX ініціює перенаправлення на стороні клієнта на інформаційну панель користувача або на попередньо відвідану сторінку, якщо це можливо.

Обробка помилок

Якщо сервер повертає помилку або якщо відправка форми не вдається з будь-якої причини, повідомлення про помилку буде відображено на самій формі, інформуючи користувача про те, що пішло не так. Це також буде оброблятися асинхронно за допомогою HTMX, щоб забезпечити безперебійну роботу користувача.

HTML структура

HTML-сторінка для функції входу розділена на кілька розділів, включаючи заголовок, форму і нижній колонтитул. Елементи мають ідентифікатори та класи, які відповідають атрибутам CSS та HTML.

Приклад:
```
<!DOCTYPE html>
<html>
<head>
  <title>Sign In</title>
  <link rel="stylesheet" href="css/signin.css">
</head>
<body>
  <div id="signin-container">
    <form hx-post="/api/signin/" hx-swap="outerHTML">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>
      
      <label for="password">Password:</label>
      <input type="password" id="password" name="password" required>
      
      <input type="submit" value="Sign In">
    </form>
  </div>
</body>
</html>
```


Інтеграція HTMX

HTMX використовується для асинхронної обробки відправлення форми. Коли форма відправляється, HTTP POST-запит надсилається на кінцеву точку /api/signin/ без необхідності повного перезавантаження сторінки. Це покращує взаємодію з користувачем.

Приклад:
```
<form hx-post="/api/signin/" hx-swap="outerHTML">
  <!-- form content -->
</form>
```

Стилізація CSS

Стилістика міститься в окремому CSS-файлі.

Приклад:
```
#signin-container {
  width: 300px;
  margin: auto;
}

label, input {
  display: block;
  margin-bottom: 10px;
}
```


Сторінка реєстрації

Сторінка реєстрації відіграє важливу роль у залученні нових користувачів до веб-застосунку інтернет-магазину. З огляду на те, що електронна комерція є дуже персоналізованою, кожен користувач потребує окремого облікового запису для управління своїми замовленнями, перегляду рекомендацій щодо товарів, збереження обраних товарів та безпечної роботи з платіжними системами. Сторінка реєстрації призначена для того, щоб дозволити новим користувачам легко і безпечно створювати власні облікові записи, створюючи основу для персоналізованого шопінгу.

Опис функціоналу

Коли користувач вперше заходить на сторінку реєстрації, він бачить просту, не перевантажену форму, що складається з наступних полів для введення даних:
- Поле адреси електронної пошти: Слугує унікальним ідентифікатором для кожного користувача.
- Поле "Пароль": Для встановлення надійного пароля для облікового запису.
- Поле "Підтвердити пароль": Для підтвердження правильності введеного пароля.

Перевірка форми

- Перевірка електронної пошти: Адреса електронної пошти є обов'язковою і повинна відповідати стандартному формату електронної пошти (example@example.com). Використовується атрибут HTML5 type="email" для перевірки на стороні клієнта.
- Перевірка пароля: Поле пароля також є обов'язковим. Воно встановлюється як type="password", щоб введені символи були приховані, забезпечуючи базовий рівень безпеки.
- Підтвердити перевірку пароля: Це поле має збігатися з початковим полем пароля, щоб переконатися, що користувач не зробив помилки при введенні пароля. З метою безпеки воно також встановлюється як type="password".

Асинхронне надсилання форми

Коли користувач натискає кнопку "Зареєструватися" після заповнення форми HTMX перехоплює цю подію і надсилає асинхронний HTTP POST запит до бекенду Django за адресою /api/register/. HTMX гарантує, що відправка форми обробляється без перезавантаження сторінки, забезпечуючи тим самим безперебійну роботу користувача.

Обробка відповіді сервера

1. Внутрішній сервіс перевіряє електронну пошту та паролі. Якщо будь-яке з полів є недійсним, повертається відповідь у форматі JSON зі статусом "помилка".
2. Перевірка на дублювання. Бекенд перевірить, чи адреса вже зареєстрована. Якщо це так, буде повернуто повідомлення про помилку.
3. Якщо перевірка пройшла успішно і дублікатів не знайдено, буде створено новий обліковий запис користувача. Відповідь у форматі JSON зі статусом "success" буде надіслано назад на фронт-енд.
4. Після успішної реєстрації HTMX на стороні клієнта перенаправляє користувача на сторінку "Дякуємо за реєстрацію" та безпосередньо на його нову панель користувача.

Обробка помилок

Помилки на стороні сервера: Якщо серверна валідація не пройшла успішно або імейл вже зареєстровано, повідомлення про помилку буде відображено безпосередньо у формі без перезавантаження сторінки, завдяки HTMX.
Помилки на стороні клієнта: Якщо валідація на стороні клієнта не пройшла успішно (наприклад, неправильний формат електронної пошти або не збігаються паролі), форма відобразить попереджувальне повідомлення без відправки даних на сервер.

HTML структура

HTML-сторінка для функції входу розділена на кілька розділів, включаючи заголовок, форму і нижній колонтитул. Елементи мають ідентифікатори та класи, які відповідають атрибутам CSS та HTML.
Приклад:
```
<!DOCTYPE html>
<html>
<head>
  <title>Registration</title>
  <link rel="stylesheet" href="css/registration.css">
</head>
<body>
  <div id="registration-container">
    <form hx-post="/api/register/" hx-swap="outerHTML">
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>

      <label for="password">Password:</label>
      <input type="password" id="password" name="password" required>

      <label for="passwordConfirm">Confirm Password:</label>
      <input type="password" id="passwordConfirm" name="passwordConfirm" required>

      <input type="submit" value="Register">
    </form>
  </div>
</body>
</html>
```

Інтеграція HTMX

HTMX використовується для асинхронної обробки відправлення форми. Коли форма відправляється, HTTP POST-запит надсилається на кінцеву точку /api/register/ без необхідності повного перезавантаження сторінки. Це покращує взаємодію з користувачем.
Приклад:
```
<form hx-post="/api/register/" hx-swap="outerHTML">
  <!-- form content -->
</form>
```

Стилізація CSS

Стилістика міститься в окремому CSS-файлі.
Приклад:
```
#registration-container {
  width: 300px;
  margin: auto;
}

label, input {
  display: block;
  margin-bottom: 10px;
}
```

домашня(головна) сторінка

Ця документація містить вичерпний посібник з розробки інтерфейсу домашньої сторінки для веб-застосунку інтернет-магазину. Головна сторінка - це зона, з якої користувачі починають свою подорож до магазину. Ця сторінка містить кілька віджетів, включаючи "Товари на розпродажі", "Популярні товари" і "Рекомендовані товари", а також маркетинговий банер у верхній частині. Ми використовуємо HTMX для асинхронних фронтенд-функцій та Python Django для внутрішньої логіки.

Опис функціоналу

Головна сторінка слугує початковою платформою, з якої користувач починає свою подорож до інтернет-магазину. Головна сторінка має на меті залучити користувачів, представляючи їм різноманітні варіанти продуктів, що відповідають їхнім потребам та інтересам, заохочуючи їх до подальшого вивчення та здійснення покупок. Це важливо як для залучення, так і для збільшення продажів.

Початкове завантаження сторінки

Коли користувач вперше потрапляє на головну сторінку, основні елементи, які повинні завантажитися, це:
- Маркетинговий банер: Візуально привабливий банер, що відображає рекламні акції, анонси або популярні продукти.
- Віджети: До них відносяться розділи "Товари на розпродажі", "Популярні товари" та "Рекомендовані товари". Кожен розділ повинен відображати колекцію реальних товарів з цінами та кнопками "Купити".

Асинхронне завантаження контенту

Коли користувач потрапляє на головну сторінку, HTMX асинхронно отримує дані для кожного віджета з відповідних кінцевих точок API. Це забезпечує швидке завантаження сторінки та покращує користувацький досвід, пришвидшуючи початкове завантаження сторінки.

Віджети

"Маркетинговий банер"

Маркетинговий банер служить для наступних цілей:
1. Реклама: Відображення поточних розпродажів, акцій або подій.
2. Залучення користувачів: Заохочення користувачів до вивчення товарів або нових надходжень.

"Товари на розпродажі"

Цей віджет приваблює користувачів, пропонуючи товари зі знижкою. Цей розділ можна оновлювати вручну або отримувати з автоматично оновлюваної таблиці бази даних товарів на розпродажі.

"Популярні товари"

Відображає список товарів, які наразі в тренді на основі реальних даних. Популярність може бути визначена на основі продажів, переглядів або комбінації факторів.

"Рекомендовані товари для вас"

Надає персоналізовані пропозиції. Цей розділ з'являється, тільки якщо користувач увійшов в систему.
Розділ працює на основі персоналізованого алгоритму: Рекомендації генеруються на основі поведінки користувача, його минулих покупок та інших даних.

Кожен віджет повинен мати:
- Зображення товару: Чітке зображення товару з високою роздільною здатністю.
- Назва продукту: Назва товару.
- Ціна: Поточна ціна товару.
- Кнопка "Купити": Зрозуміла та доступна кнопка для додавання товару до кошика.

Пошук товарів

Однією з найважливіших функціональних можливостей на головній сторінці є функція пошуку, стратегічно розташована у верхній частині сторінки для максимальної видимості та доступності. Ця функція складається з поля для введення тексту, яке дозволяє користувачам швидко шукати продукти в різних категоріях. Коли користувачі починають вводити текст, HTMX використовується для асинхронних запитів до внутрішнього API Python Django, отримуючи релевантні результати пошуку в режимі реального часу. Ці результати можуть з'являтися у випадаючому списку безпосередньо під полем пошуку або відображатися як частина більш повної сторінки результатів пошуку. Функція пошуку покращує взаємодію з користувачем, забезпечуючи ефективний, плавний і швидкий спосіб пошуку конкретних товарів без необхідності переходити через кілька сторінок або категорій. Вона має на меті зробити процес покупок більш цілеспрямованим і персоналізованим, тим самим заохочуючи користувачів здійснювати покупки.

"Додати в кошик"

Кожна кнопка "Купити" оснащена HTMX атрибутами, які при натисканні будуть:
1. Надіслати асинхронний POST-запит на кінцеву точку /api/add_to_cart/.
2. Отримає відповідь у форматі JSON від сервера.
3. Оновить іконку кошика або кількість кошиків на головній сторінці, щоб відобразити новий товар, і все це без перезавантаження сторінки.

Обробка помилок

- Успіх: Коли товар успішно додано до кошика, невелике сповіщення або зміна іконки кошика має підтвердити цю дію.
- Помилка: Якщо операція не вдалася (наприклад, через проблеми з мережею або помилки сервера), користувачеві має з'явитися повідомлення з проханням повторити спробу.

HTML структура

Головна сторінка містить кілька основних блоків:
1. Пошук: поле вводу пошуку, яке автоматично шукатиме товари щойно користувач почав вводити символи.
2. Маркетинговий банер: Для реклами поточних акцій або оголошень.
3. Віджет товарів на розпродажі: Показує товари, на які в даний момент діє знижка.
4. Віджет популярних товарів: Показує товари, які наразі є популярними.
5. Віджет "Рекомендовані товари для вас": Для надання персоналізованих рекомендацій, якщо користувач увійшов в систему.

Приклад:
```
<!DOCTYPE html>
<html>
<head>
  <title>Home Page</title>
  <link rel="stylesheet" href="css/home.css">
</head>
<body>

  <!-- Search Feature -->
  <div id="search-container">
    <input type="text" id="product-search" placeholder="Search products..." hx-get="/api/search/" hx-trigger="keyup delayed:300ms">
  </div>

  <!-- Marketing Banner -->
  <div id="marketing-banner">
    <!-- Marketing banner content -->
  </div>
  
  <!-- Items on Sale Widget -->
  <div id="items-on-sale" hx-include="/api/items_on_sale/">
    <!-- Items on sale will be populated here -->
  </div>
  
  <!-- Popular Items Widget -->
  <div id="popular-items" hx-include="/api/popular_items/">
    <!-- Popular items will be populated here -->
  </div>
  
  <!-- Recommended Items for You Widget -->
  <div id="recommended-items" hx-include="/api/recommended_items/">
    <!-- Recommended items will be populated here -->
  </div>

</body>
</html>
```

Інтеграція HTMX

HTMX відіграє центральну роль у покращенні користувацького досвіду, дозволяючи виконувати асинхронні операції на головній сторінці. Ось як це працює для різних функціональних можливостей:
1. Завантаження віджетів: Для кожного з віджетів продуктів, таких як "Товари на розпродажі", "Популярні товари" та "Рекомендовані товари для вас", ми використовуємо атрибут hx-include в HTMX. Цей атрибут вказує кінцеву точку API Django, з якої потрібно отримати вміст віджету. Коли завантажується головна сторінка, HTMX автоматично отримує ці дані асинхронно, заповнюючи кожен віджет без необхідності повного перезавантаження сторінки. Наприклад, для віджета "Товари на продаж" це виглядає наступним чином ```<div id="items-on-sale" hx-include="/api/items_on_sale/">```.
2. Додати в кошик: Кожна кнопка містить атрибути hx-post та hx-swap. Коли користувач натискає кнопку "Купити", робиться асинхронний POST-запит до кінцевої точки /api/add_to_cart/ Django, який додає елемент до кошика. Атрибут hx-swap дозволяє поміняти місцями новий лічильник кошика або іконку на сторінці без повного перезавантаження.
3. Функція пошуку: Коли користувач починає вводити текст, HTMX запускає асинхронні GET-запити до кінцевої точки пошукового API Django. API повертає список відповідних елементів, які можна динамічно відображати у випадаючому списку або в окремій області результатів пошуку. Ми можемо використовувати атрибут hx-trigger в HTMX, щоб вказати, що це повинно відбуватися щоразу, коли користувач вводить новий символ або після короткої затримки відбиття, наприклад, так: ```<input type="text" hx-get="/api/search/" hx-trigger="keyup delayed:300ms">.```

Стилізація CSS

Стилістика міститься в окремому CSS-файлі.
Приклад:
```
#marketing-banner {
  /* Styles for marketing banner */
}

#items-on-sale, #popular-items, #recommended-items {
  /* Styles for widgets */
}
```


Сторінка пошуку

В інтернет-магазині з широким асортиментом товарів у різних категоріях пошук конкретного товару може стати складним завданням для користувачів. Сторінка пошуку вирішує цю проблему, надаючи цілеспрямований інтерфейс, де користувачі можуть шукати товари на основі текстового введення та додаткових фільтрів. Йдеться не просто про пошук, а про те, щоб зробити процес пошуку настільки легким, щоб користувачі без вагань поверталися на платформу для задоволення своїх майбутніх потреб.

Як має функціонувати

Текстовий пошук - це основна функція сторінки пошуку, яка є центром взаємодії з користувачем. Користувача зустрічає помітний рядок пошуку, де він може ввести назву або навіть часткову назву продукту, який він шукає. Повинні підтримуватись наступні характеристики сторінки:
1. Асинхронні результати. Використовуючи HTMX, кожне натискання клавіші в рядку пошуку повинно ініціювати асинхронний запит до бекенду Django. Бекенд, в свою чергу, виконує запит для пошуку відповідних елементів і повертає ці дані.
2. Зворотній зв'язок пошуку: Якщо збігів не знайдено, повідомлення на кшталт "Товарів не знайдено" має відображатися динамічно, без необхідності перезавантаження сторінки.

Бічна панель фільтрів

Збоку від основних результатів пошуку доступна бічна панель фільтрів, яка дозволяє користувачам ще більше звузити результати пошуку. Вона буде містити:
1. Категорії: Випадаючий список або список доступних категорій продуктів.
2. Підкатегорії: Залежний випадаючий список, який стає активним при виборі категорії, показуючи підкатегорії, що відносяться до обраної категорії.
3. Діапазон цін: Повзунок або поля з подвійним введенням, де користувачі можуть вказати мінімальну і максимальну ціну.
4. Рейтинг: Радіокнопки або повзунок для вибору діапазону рейтингу для фільтрації товарів.

Кожен з цих фільтрів, оснащений HTMX-атрибутами, ініціює новий GET-запит до бекенду Django, оновлюючи результати пошуку асинхронно на основі застосованих фільтрів.

Сортування

На тому ж рядку, що і рядок пошуку, випадаючий список сортування дозволяє користувачам сортувати результати пошуку:
1. Ціна: За зростанням або спаданням.
2. Популярності: На основі відгуків користувачів або кількості покупок.
3. Найновіші: Товари, нещодавно додані до магазину.

Вибір параметра сортування реорганізує поточні результати пошуку відповідно до обраних критеріїв. Це має відбуватися в режимі реального часу, без перезавантаження сторінки, завдяки HTMX.

HTML структура

Приклад:
```
<!DOCTYPE html>
<html>
<head>
  <title>Search Page</title>
</head>
<body>

  <!-- Search Bar -->
  <div id="search-bar">
    <input type="text" hx-get="/api/search/" hx-trigger="keyup delayed:300ms">
  </div>

  <!-- Filters Sidebar -->
  <div id="filters">
    <!-- Categories, Sub-categories, Price Range, and Rating filters with HTMX attributes -->
  </div>

  <!-- Search Results -->
  <div id="search-results" hx-include="/api/initial_results/">
    <!-- Products will be populated here -->
  </div>

  <!-- Sorting Dropdown -->
  <div id="sorting">
    <select hx-get="/api/sort/" hx-trigger="change">
      <!-- Sorting options here -->
    </select>
  </div>

</body>
</html>
```

Інтеграція HTMX

Для основної пошукової функціональності поле введення HTML доповнюється HTML-атрибутами hx-get і hx-trigger. Атрибут hx-get вказує кінцеву точку API бекенда Django для отримання результатів пошуку в реальному часі. Атрибут hx-trigger налаштовує асинхронний запит на виконання кожного натискання клавіші, але з затримкою, щоб не перевантажувати сервер.

Приклад:
```<input type="text" hx-get="/api/search/" hx-trigger="keyup delayed:300ms">```

Для кожної опції фільтрації, такої як категорії, підкатегорії, ціновий діапазон та рейтинг, ми використовуємо атрибути hx-get та hx-trigger. Атрибут hx-get вказує кінцеву точку API, яка фільтрує продукти на основі обраних критеріїв. Атрибут hx-trigger визначає подію, яка запускає цю фільтрацію, зазвичай це зміна для випадаючих списків або слайдів.

Приклад:
```
<!-- Category Filter -->
<select id="category-filter" hx-get="/api/filter_category/" hx-trigger="change">
  <!-- Categories here -->
</select>

<!-- Price Range Filter -->
<input type="range" min="0" max="1000" id="price-filter" hx-get="/api/filter_price/" hx-trigger="change">
```

Випадаючий список сортування дозволяє користувачам сортувати результати пошуку. Це досягається за допомогою hx-get в HTMX, щоб вказати кінцеву точку API для сортування, і hx-trigger, щоб вказати, що сортування повинно застосовуватися, коли користувач змінює вибрану опцію.

Приклад:
```
<select id="sorting-dropdown" hx-get="/api/sort/" hx-trigger="change">
  <!-- Sorting options like 'Price: Low to High', 'Price: High to Low', 'Popularity', 'Newest' -->
</select>
```

Стилізація CSS

Стилістика міститься в окремому CSS-файлі.
Приклад:
```
#search-results {
  /* Styles for search results */
}

#filter-container {
  /* Styles for filters */
}

